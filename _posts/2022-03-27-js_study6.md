---
layout: post
title: 자바스크립트에서의 스코프 및 변수
comments: true
tags: Javascript
---

<h4>스코프</h4>

다른 언어의 스코프와 구별되는 특징이 있고, var const let 키워드로 선언한 변수의 스코프도 다르게 동작한다. 이는 변수와 함수와 깊은 관련이 있다. 모든 식별자는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다. 이를 스코프라 하며 스코프는 `식별자가 유요한 범위`를 말한다.

var 키워드는 같은 스코프 내에서 중복 선언을 허용하여 의도치 않게 변수값이 재할당되어 변경되는 부작용이 발생할 수 있지만, let 이나 const 키워드는 같은 스코프 내에서 중복 선언을 허용하지 않는다.

스코프는 `전역`과 `지역`으로 구분한다. 함수 몸체 내부에서 정의한 함수를 `중첩 함수` 그리고 중첩 함수를 포함하는 함수를 `외부 함수`라고 한다. 스코프가 함수의 중첩에 의해 `계층적 구조`를 가지게 된다. 즉 외부 함수의 지역스코프를 상위 스코프라 칭한다. 그리고 최상위 스코프는 `전역 스코프`로써 이러한 계층적으로 연결된 것을 `스코프 체인`이라고 말한다. 상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조할 수 있지만 하위 스코프에서 유효한 변수를 상위 스코프에서 참조할 수 없다는 말이다.

<h6>함수 레벨 스코프</h6>

다른 언어와 다르게 자바스크립트에서 var 키워드로 선언된 변수는 오로지 `함수의 코드 블록만을 지역 스코프를 인정한다.` 다만 let, const 키워드는 다른 언어와 개념이 비슷한 블록 레벨 스코프를 지원한다.
 
<h4>변수</h4>

변수는 언젠가 소멸하며, 생물과 유사하게 생성되고 소멸되는 생명 주기가 있다. 전역 변수는 마지막 문이 실행되어 더 이상 실행할 문이 없을 때 종료한다.

<h6>전역 변수의 문제점</h6>

암묵적 결합 - 전역 변수는 어디에서든 참조하고 할당할 수 있다. 이는 모든 코드가 전역 변수를 참조하고 변경할 수 있는 `암묵적 결합`을 허용한다. 변수의 유효 범위가 크면 클수록 코드의 가독성은 나빠지고 의도치 않게 상태가 변경될 수 있다.

긴 생명 주기 - var은 사용하지 않는 것을 권장하며, 전역 변수의 생명 주기는 길기 때문에 메모리 리소스도 오랜 기간 소비한다.

스코프 체인 상에서 종점에 존재 - 앞에서 배운 계층적 구조에서 전역 변수는 최상위 구조를 가지고 있다.

네임스페이스 오염 - 파일이 분리되어 있다 해도 하나의 전역 스코프를 공유한다. 즉 예상치 못한 결과를 가지고 올 수 있다.

